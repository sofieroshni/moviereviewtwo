"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7013],{73818:function(e,t,i){i.d(t,{Z:function(){return H}});var a,r,s=i(52322),o=i(2784),n=i(4283),l=i(85767),d=i(83128),E=i(51250);let c="ad-oo",u={getConsentFromCookie(e,t){let i=(0,E.rZ)(c,t?.headers);if(void 0!==i)return!(parseInt(i)&e)},setConsentToCookie(e,t,i){let a=(0,E.rZ)(c,i),r=0;if(void 0!==a&&(("number"==typeof a||"string"==typeof a)&&(r=parseInt(a)),r&t&&!e||!(r&t)&&e))return;e||(r|=t);let s=new Date;s.setHours(s.getHours()+36),(0,E.Ys)(c,r.toString(),s,"shared")}};var I=i(54073),T=i.n(I),m=i(45455),p=i.n(m),g=i(15907),A=i(12859),h=i(76460);let S=(e,t)=>{window?.mediaOrchestrator?.publish(e,t)},f=e=>{let t=e?.slots;return t&&t[A.A.SIS_PIXEL]?.slotMarkup},w=(e,t)=>{let i=e.match(/el\.src="(.*)";/),a=i?i[1]:void 0;return a||t.error("Failed to retrieve SIS Pixel URL"),a},_=async(e,t)=>{try{return await fetch(e,{method:"GET",credentials:"include"}),!0}catch(e){t.error("Error fetching SIS Pixel",e)}};var N=i(48574);let R=(0,i(16189).createLogger)()("util_sisPixel_rws");(a=r||(r={})).GRANTED="granted",a.PROMPT="prompt",a.DENIED="denied";let y=new Set().add("fake_treatment_1.1").add("fake_treatment_1.2").add("fake_treatment_1.3").add("fake_control_2"),v=["mousedown","scroll","keydown"],b="https://amazon-adsystem.com",L=async()=>{let e="cookieDeprecationLabel"in navigator,t="requestStorageAccessFor"in document;if(!e||!t)return R.log("Browser not compatible with Related Website Sets",{hasCookieDeprecationLabel:e,hasRequestStorageAccessFor:t}),!1;try{let e=await navigator.cookieDeprecationLabel.getValue();return R.log(`Received cookieDeprecationLabel: ${e}`),y.has(e)}catch(e){return R.error("Issue fetching cookieDeprecationLabel",e),!1}},D=async()=>{let e=await O();switch(R.log(`Received storageAccessPermissionStatus: ${e}`),e){case"granted":return P();case"prompt":return M()}R.log(`'top-level-storage-access' permissions for ${b}: denied`)},M=async()=>{let e;if(!navigator.userActivation)return;let t=new Promise(t=>{e=e=>t(e)}),i=async()=>{navigator.userActivation.isActive&&(v.forEach(e=>{document.removeEventListener(e,i)}),await P(),e(!0))};return v.forEach(e=>{document.addEventListener(e,i)}),t},O=async()=>{try{return(await navigator.permissions.query({name:"top-level-storage-access",requestedOrigin:b})).state}catch(e){R.error("Error querying Storage Access permissions",e);return}},P=async()=>{if("requestStorageAccessFor"in document)try{return await document.requestStorageAccessFor(b),!0}catch(e){R.error("Error requesting storage access",e)}},C=o.memo(e=>{let{sisSlotMarkup:t}=e,[i,a]=(0,o.useState)(!1),r=(0,N.wL)("util_sisSlotMarkup");return(0,o.useEffect)(()=>{(async()=>{if(!await L())return a(!0);await D();let e=w(t,r);e&&await _(e,r)})()},[]),i?(0,s.jsx)("div",{ref:g.dangerouslySetHTML.bind(null,t)}):null}),k=e=>{let{adSlotsInfo:t}=e;(0,h.WJ)();let i=()=>{(0,g.isFullscreen)()||(0,g.makeAdAJAXRequest)(t).finally(()=>g.responsiveAdAPIWrapper.setPreviousWindowWidth())},{slotsEnabled:a,clientSideUrlBase:r,atfSlots:n,slotSizeMap:l,apsSlotInfoMap:d}=(0,h.OF)(t);o.useEffect(()=>{let e,s;if(a&&!p()(l)&&(g.responsiveAdAPIWrapper.setPreviousWindowWidth(),e=T()(i,750),window.addEventListener("resize",e),t?.adRefreshInfo?.isEnabled&&("complete"===document.readyState?(0,g.handleAutoRefresh)(t):window.addEventListener("load",()=>(0,g.handleAutoRefresh)(t)))),!a||!r||!n.includes(A.A.INLINE20)){let e={type:g.AdVideoEventType.NO_AUTOPLAY_VIDEO_DETECTED_EVENT_TYPE,slotName:A.A.INLINE20,timestamp:Date.now()},t={type:g.AdVideoEventType.EMPTY,slotName:"",timestamp:Date.now()};S(g.MediaEvent.MEDIA_PLAYBACK_EVENT_NAME,e),S(g.MediaEvent.NO_PRIMARY_ADS_TO_LOAD_EVENT_NAME,t)}return()=>{e&&window.removeEventListener("resize",e),s&&window.removeEventListener("load",s)}},[]);let E=(0,h.Bf)(a,r,n,l,d),c=f(t);return(0,s.jsxs)(s.Fragment,{children:[c?(0,s.jsx)(C,{sisSlotMarkup:c}):null,(0,s.jsx)("script",{async:!0,dangerouslySetInnerHTML:{__html:E}})]})};function H(){let e=(0,l.B)(),{adSlotsInfo:t}=(0,d.Ok)();return e?.context?.sidecar?.ads?.adsCcbaConsent!==void 0&&u.setConsentToCookie(e.context.sidecar?.ads?.adsCcbaConsent,16,e.context?.headers),(0,s.jsx)(n.Z,{name:"IMDbNextAdPageData",children:(0,s.jsx)(k,{adSlotsInfo:t})})}},12859:function(e,t,i){i.d(t,{A:function(){return a}});let a={INLINE20:"inline20",INLINE40_MAIN:"inline40-responsive-main",INLINE40_SIDEBAR:"inline40-responsive-sidebar",INLINE40:"inline40",INLINE50:"inline50",INLINE60:"inline60",INLINE80:"inline80",INLINEBOTTOM:"inlinebottom",INTERSTITIAL:"interstitial",MEDIAVIEWER_BANNER:"mediaviewer_banner",PROMOTED_WATCH_BAR:"promoted_watch_bar",PROVIDER_PROMOTION:"provider_promotion",SIS_PIXEL:"sis_pixel",VIDEO_CAROUSEL_ADSCANNER:"video_carousel_adscanner"}},76460:function(e,t,i){var a,r,s,o,n,l;i.d(t,{WJ:function(){return d},Bf:function(){return E},OF:function(){return c},Wd:function(){return u}}),(o=a||(a={})).PREMIUM="premium",o.STANDARD="standard",(n=r||(r={})).BLANK="blank",n.UNKNOWN="unknown",(l=s||(s={})).BLANK="blk",l.UNKNOWN="unk";let d=()=>{void 0===window.hasAdAJAXCallFired&&(window.hasAdAJAXCallFired=!1)},E=(e,t,i,a,r)=>`
        if (window && window.ad_utils && window.ad_utils.makeAtfSlotsCall) {
            window.ad_utils.makeAtfSlotsCall(
                ${e},
                '${t}',
                '${i}',
                ${JSON.stringify(a)},
                ${r?JSON.stringify(r):"{}"});
    }`,c=e=>({slotsEnabled:!e||e.slotsEnabled,clientSideUrlBase:e?e.clientSideUrl:"",atfSlots:e&&e.slots?Object.keys(e.slots).join(","):"",slotSizeMap:e?e.slotSizeMap:{},apsSlotInfoMap:e&&e.apsSlotInfoMap||{}}),u=e=>!e||e?.creativeMetadata?.creativeWidth===0||e?.creativeMetadata?.adProductType?.name===r.BLANK},37013:function(e,t,i){let a,r;i.r(t),i.d(t,{__N_SSP:function(){return eb},default:function(){return eL}});var s,o,n=i(52322),l=i(66898),d=i(11778),E=i(70314),c=i.n(E),u=i(2784),I=i(15907),T=i(25436),m=i(83128),p=i(16189);let g=(0,p.createLogger)()("util_fetchAdServiceAd"),A=async e=>{try{return await (0,I.makeAdServiceAdAJAXRequest)(e)}catch(e){return g.error("makeAdServiceAdAJAXRequest failed",e),null}};var h=i(33192),S=i(14865),f=i(45103),w=i(56812),_=i(77594),N=i(67646),R=i(81988),y=i(96556),v=i(73818),b=i(82331),L=i(28827),D=i(11793),M=i(52817),O=i(72779),P=i.n(O),C=i(73282);let k=e=>{let{galleryUrl:t}=e,i=(0,L.N)({id:"mediaViewer_ariaLabel_gallery",defaultMessage:"gallery"});return(0,n.jsx)(f.IconButton,{"data-testid":"mv-gallery-button",name:"grid-view",label:i,href:t,onColor:"base"})};var H=i(88173),x=i(11817);let B={NO_ELEMENT:"advertising banner/interstitial component or iframe are undefined",NO_IFRAME_CONTENT:"banner or interstitial was clicked on, but no contentDocument was found in iframe",NO_CLICK_TARGET:"banner or interstitial was clicked on, but no clickable element was found in iframe"},$=(0,p.createLogger)()("");function G(e,t,i){let a=t?.querySelector("iframe");if(!a){$.error(B.NO_ELEMENT);return}let r=a.contentDocument;if(!r||!r.elementFromPoint){$.error(B.NO_IFRAME_CONTENT);return}let{left:s,top:o}=a.getBoundingClientRect(),n=r.elementFromPoint(e.clientX-s,e.clientY-o);if(n){n.dispatchEvent(new MouseEvent(e.type,{bubbles:!0,cancelable:!0})),(0,x.P)(i);return}let l=t?.querySelector("#interstitial_sponsored");if(l){let{left:t,top:a,width:r,height:s}=l.getBoundingClientRect(),o=e.clientX-t,n=e.clientY-a;if(o>0&&o<=r&&n>0&&n<=s){l.dispatchEvent(new MouseEvent(e.type,{bubbles:!0,cancelable:!0})),(0,x.P)(i);return}}$.error(B.NO_CLICK_TARGET)}var W=i(42057);let F=e=>{let{state:t,className:i,imagePosition:a}=e,r={countLabel:(0,L.N)(H.KL.countLabel,{position:a,total:t.totalImages})},s=`${H.Nw[t.type]}_mv`,o=(0,u.useRef)(null);return(0,n.jsx)(C.ol,{className:P()(H.$C.ACTION_BAR,I.MEDIAVIEWER_ACTIONBAR_CLASS,i),refTagPrefix:s,shareProps:{shareBody:j,emailSubject:j,label:U},breadcrumbProps:{refTagPrefix:s,"data-testid":"mv-breadcrumb-close-button"},actions:(0,n.jsxs)(n.Fragment,{children:[!t.showInterstitial&&!!t.position&&t.totalImages&&(0,n.jsx)(W.vI,{"data-testid":H.$C.ACTION_BAR_GALLERY_COUNT,children:r.countLabel}),(0,n.jsx)(k,{galleryUrl:s?`${t.galleryUrl}?ref_=${s}_sm`:t.galleryUrl})]}),heightClass:"extended",children:!t.showInterstitial&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.ZP,{name:I.MEDIAVIEWER_BANNER_SLOT_NAME}),(0,n.jsx)(W.Ov,{ref:o,onClick:e=>{G(e,o.current,"ad-banner")}})]})})},U={id:"mediaViewer_ariaLabel_shareOnSocialMedia",defaultMessage:"share on social media"},j={id:"mediaViewer_shareText_viewThisImage",defaultMessage:"View this image on IMDb!"},V=1e3/60;function Y(){clearTimeout(a),a=void 0}function q(e){return e>0?Math.min(450,e):e<0?Math.max(-450,e):0}function K(e,t,i){30>Math.abs(e)?(t(0),Y()):(i(),t(q(-e)),Y(),setTimeout(()=>t(0),V))}var Z=i(5632),J=i(18174),X=i.n(J),z=i(26806),Q=i(72072),ee=i(76460),et=i(66662),ei=i(27261),ea=i(98046),er=i(87712),es=i(19126),eo=i.n(es);let en=e=>{let t=e?eo().parse(window.location.search.replace("?","")):{};return delete t.ref_,eo().stringify(t)};var el=i(72579),ed=i.n(el);let eE=(e,t)=>{switch(e){case er.b.NAME:return ed()(t,`${e}.${e}Text.text`,"");case er.b.TITLE:let i=ed()(t,`${e}.${e}Text.text`,""),a=ed()(t,`${e}.releaseYear.year`,"");return a?`${i} (${a})`:i;case er.b.GALLERY:return ed()(t,"imageGallery.galleryText","");case er.b.LIST:return ed()(t,`${e}.name.originalText`,"")}},ec=(e,t)=>e===er.b.NAME||e===er.b.TITLE?`/${e}/${t}/mediaindex/`:`/${e}/${t}/`,eu=(e,t)=>{let i=[];return t.forEach(t=>{let a=e===er.b.LIST?{...t,node:{...t.node.item,caption:t.node.description?.originalText||t.node.item.caption}}:{...t};i.push(a)}),i},eI=(e,t,i)=>{let a=H.Qn[e],r=e===er.b.LIST?"items":"images",s=`${a}.${r}`,o=`${a}.wrapFront`,n=`${a}.wrapBack`,l=a=>({images:eu(e,ed()(i,`${a}.edges`,[])),title:eE(e,i),galleryUrl:ec(e,t),total:ed()(i,`${a}.total`,0),startCursor:ed()(i,`${a}.pageInfo.startCursor`,""),hasPreviousPage:ed()(i,`${a}.pageInfo.hasPreviousPage`,!1),endCursor:ed()(i,`${a}.pageInfo.endCursor`,""),hasNextPage:ed()(i,`${a}.pageInfo.hasNextPage`,!1)}),d=l(s),E=l(o),c=l(n),u=d.total?d:E.total?E:c;return{images:[...d.images,...E.images,...c.images],title:u.title,galleryUrl:u.galleryUrl,total:u.total,startCursor:u.startCursor,hasPreviousPage:u.hasPreviousPage,endCursor:u.endCursor,hasNextPage:d.hasNextPage}},eT=(e,t,i,a,r,s)=>{let o=[],n={main:void 0};switch(e){case"init":n.main={id:t,jumpTo:r,first:H.kH,last:H.kH/2,lastYes:!0,firstYes:!0};break;case"left":o=[...Array(H.kH).keys()].map(e=>{let t=i-e;return t<=0?null:t}),n.main={id:t,before:a,last:H.kH,lastYes:!0,firstYes:!1};break;case"right":o=[...Array(H.kH).keys()].map(e=>{let t=i+e;return t>s?null:t}),n.main={id:t,after:a,first:H.kH,lastYes:!1,firstYes:!0}}return o=o.filter(e=>null!==e),"init"!==e&&o.length<1&&(n.main=void 0),{fetchPositions:o,args:n}},em=(e,t)=>{let i,a;let r=e.position||0,s=e.media&&e.media[r],o=s?.node.id;return o&&(i=e.vanitySubType&&e.vanityType?"/[mediaViewerType]/[vanityOrId]/[idWithVanity]/mediaviewer/[img]":"/[mediaViewerType]/[vanityOrId]/mediaviewer/[img]",a=e.vanitySubType&&e.vanityType?`/${e.vanityType}/${e.vanitySubType}/${e.listId}/mediaviewer/${o}/${t&&`?${t}`}`:`/${e.vanityType??e.type}/${e.listId}/mediaviewer/${o}/${t&&`?${t}`}`),{url:i,path:a}},ep=(e,t,i)=>{let a=H.Nw[t],r=H.k6[e];return`${a}_${i?"mv_ad":"mv"}_${r}`},eg=e=>{var t;return Math.abs(e)===H.ve||0==((Math.abs(e)-H.ve)%(t=H.gG)+t)%t},eA=e=>{var t;return 0==((Math.abs(e)-H.ve)%(t=H.HP)+t)%t};(s=o||(o={})).INITIALIZE="INITIALIZE",s.PAGE_LEFT="PAGE-LEFT",s.PAGE_RIGHT="PAGE-RIGHT",s.GOTO_IMAGE_ID="GOTO-IMAGE-ID",s.UPDATE_DISTANCE="UPDATE-DISTANCE",s.UPDATE_UNSEEN_INTERSTITIAL_AVAILABLE="UPDATE_UNSEEN_INTERSTITIAL_AVAILABLE",s.FETCH_IMAGES="FETCH-IMAGES",s.FETCH_IMAGES_PENDING="FETCH-IMAGES-PENDING",s.FETCH_IMAGES_DONE="FETCH-IMAGES-DONE",s.FETCH_IMAGES_FAILED="FETCH-IMAGES-FAILED",s.SHOW_EDIT_DRAWER="SHOW-EDIT-DRAWER",s.HIDE_EDIT_DRAWER="HIDE-EDIT-DRAWER",s.SHOW_REPORT_DRAWER="SHOW-REPORT-DRAWER",s.HIDE_REPORT_DRAWER="HIDE-REPORT-DRAWER",s.SHOW_BOTTOM_SHEET="SHOW-BOTTOM-SHEET",s.HIDE_BOTTOM_SHEET="HIDE-BOTTOM-SHEET",s.SHOW_PAGER="SHOW-PAGER",s.HIDE_PAGER="HIDE-PAGER",s.SET_MOUSE_TIMEOUT_ID="SET-MOUSE-TIMEOUT-ID",s.SET_LAST_TIME_MOUSE_MOVED="SET-LAST-TIME-MOUSE-MOVED";let eh=(0,p.createLogger)()("useMediaViewerState"),eS={initialize:e=>(t,i)=>{let{initialImageId:a,type:r,listId:s}=i();e||(t(a?eS.fetchImageBatch({direction:"init",jumpTo:a}):eS.fetchImageBatch({direction:"init",position:0})),t({type:"INITIALIZE",payload:{setState:{position:0,type:r,listId:s,initialImageId:a,enablePagers:!0}}}))},gotoImageId:e=>(t,i)=>{let a=Object.values(i().media).find(t=>t.node.id===e);t(a?{type:"GOTO-IMAGE-ID",payload:{position:a.position}}:eS.fetchImageBatch({direction:"init",jumpTo:e}))},fetchImageBatch:e=>(t,i)=>{let{jumpTo:a,direction:r,position:s}=e,o=i(),{type:n,listId:l,media:d,isUserLoggedIn:E}=o,{fetchPositions:u,args:I}=eT(r,l,s,d[o.position]?.cursor,a,o.totalImages),T=n===er.b.LIST,{publicRuntimeConfig:m}=c()();t({type:"FETCH-IMAGES-PENDING",payload:{fetchPositions:u,setState:{initiallyLoading:0===u.length&&!s}}}),Promise.all([!!I.main&&o.gqlClient.query((0,H.s)(n),I.main,{url:m.graphQLEndpoint,serverSideCacheable:!(T&&E)}).toPromise().then(e=>{let a=eI(n,l,e.data);if(a.images.length<1){let e="mediaviewer queryData image was empty";throw eh.error(e,{type:i().type,id:i().listId}),Error(e)}t({type:"FETCH-IMAGES-DONE",payload:{direction:r,fetchPositions:u,fetchResult:a}})}).catch(e=>{eh.error("mediaviewer query resulted in error",{type:i().type,id:i().listId,error:e}),t({type:"FETCH-IMAGES-FAILED",payload:{fetchPositions:u,setState:{initiallyLoading:!1},fetchError:e}})})].filter(Boolean))},page:e=>(t,i)=>{let a,r,s;let o=i(),n={left:-1,right:1,load_left:-4,load_right:4},l=o.pageDirection;if(o.loading[o.position]&&!o.showInterstitial||!o.enablePagers)return;let d=o.showInterstitial;eg(i().distance)&&(i().unseenInterstitialAvailable=!1),eA(i().distance)&&o.adHandlers?.updateBannerAd(),t(eS.updateDistance(n[e])),t(eS.stageInterstitialAd());let E=i().showInterstitial,c=d&&l!==e,u=E||c?i().position:i().position+n[e],I=i().position+n[`load_${e}`],m={type:o.type,subType:T.SubPageType.MEDIA_SINGLE,id:o.listId};switch(e){case"left":r=u<=0?i().totalImages:u,a=I<=0?1:r===i().totalImages?i().totalImages:I,s="PAGE-LEFT";break;case"right":r=u>o.totalImages?1:u,a=I>o.totalImages?i().totalImages:1===r?1:I,s="PAGE-RIGHT"}o.media[r]||(a=r),o.media[a]||o.errors[a]||o.loading[a]||t(eS.fetchImageBatch({direction:e,position:r}));let p=ep(e,o.type,d);i().showInterstitial?(0,ei.K8)(p,m,`mvi-${s}`,ea.qB.ACTION_ONLY):(0,ei.K8)(p,m,`mv-${s}`,ea.qB.PAGE_HIT),t({type:s,payload:{position:r,refTag:p}})},updateDistance:e=>(t,i)=>{t({type:"UPDATE-DISTANCE",payload:{distance:i().distance+e}})},stageInterstitialAd:()=>async(e,t)=>{if(!t().unseenInterstitialAvailable){let i=await t().adHandlers?.updateInterstitialAd(),a=!(0,ee.Wd)(i?.slotsMap?.[I.INTERSTITIAL_SLOT_NAME]);e({type:"UPDATE_UNSEEN_INTERSTITIAL_AVAILABLE",payload:{unseenInterstitialAvailable:a}}),eg(t().distance)&&(t().showInterstitial=a)}},showEdit:()=>({type:"SHOW-EDIT-DRAWER"}),hideEdit:()=>({type:"HIDE-EDIT-DRAWER"}),showReport:()=>({type:"SHOW-REPORT-DRAWER"}),hideReport:()=>({type:"HIDE-REPORT-DRAWER"}),showBottomSheet:()=>({type:"SHOW-BOTTOM-SHEET"}),hideBottomSheet:()=>({type:"HIDE-BOTTOM-SHEET"}),showPager:()=>({type:"SHOW-PAGER"}),hidePager:()=>({type:"HIDE-PAGER"}),setMouseTimeoutId:e=>t=>{t({type:"SET-MOUSE-TIMEOUT-ID",payload:{mouseTimeoutId:e}})},setLastTimeMouseMoved:e=>t=>{t({type:"SET-LAST-TIME-MOUSE-MOVED",payload:{lastTimeMouseMoved:e}})}},ef=function(e,t){let i,{type:a,payload:r}=t;switch(a){case"INITIALIZE":i={...e,...r?.setState};break;case"FETCH-IMAGES-PENDING":{let{fetchPositions:t}=r,a={...e.loading},s={...e.media};t.forEach(e=>{s[e]||(a[e]=!0)}),i={...e,loading:a,...r?.setState};break}case"FETCH-IMAGES-DONE":{let{fetchResult:t,fetchPositions:a,direction:s}=r,o={...e.media},n={...e.loading};t.images.forEach(e=>{if(o[e.position]||(o[e.position]=e,n[e.position]=!1),(0,S.getIsBrowser)()){let t=new Image;t.srcset=(0,et.gA)(e.node,!0),t.src=e.node.url}}),a?.forEach(e=>{n[e]=!1});let l="init"===s?t.images?.[0]?.position:e_(e.position,n,o,s,t);i={...e,initiallyLoading:!1,position:l,media:o,loading:n,listTitle:t.title,totalImages:t.total,enablePagers:t.total>1,galleryUrl:t.galleryUrl};break}case"FETCH-IMAGES-FAILED":{let{fetchPositions:t,fetchError:a}=r,s={...e.loading},o={...e.errors},n={...e.media};t.forEach(e=>{s[e]=!1,n[e]||(o[e]=a)}),i={...e,...r?.setState,errors:o,loading:s};break}case"PAGE-LEFT":case"PAGE-RIGHT":case"GOTO-IMAGE-ID":i={...e,position:r.position,refTag:r.refTag};break;case"UPDATE-DISTANCE":{let t=r?.distance??0,a=e.distance>t?"left":"right",s=eg(t)&&e.unseenInterstitialAvailable,o=eg(t-1),n=eg(t+1);i={...e,distance:r.distance,showInterstitial:s,prevIsInterstitial:o,nextIsInterstitial:n,pageDirection:a};break}case"UPDATE_UNSEEN_INTERSTITIAL_AVAILABLE":{let{unseenInterstitialAvailable:t}=r;i={...e,unseenInterstitialAvailable:t};break}case"SHOW-EDIT-DRAWER":i={...e,showEditDrawer:!0,showReportDrawer:!1};break;case"HIDE-EDIT-DRAWER":i={...e,showEditDrawer:!1};break;case"SHOW-REPORT-DRAWER":i={...e,showReportDrawer:!0,showEditDrawer:!1};break;case"HIDE-REPORT-DRAWER":i={...e,showReportDrawer:!1};break;case"SHOW-BOTTOM-SHEET":i={...e,showBottomSheet:!0};break;case"HIDE-BOTTOM-SHEET":i={...e,showBottomSheet:!1};break;case"SHOW-PAGER":i={...e,pagerVisibility:!0};break;case"HIDE-PAGER":i={...e,pagerVisibility:!1};break;case"SET-MOUSE-TIMEOUT-ID":i={...e,mouseTimeoutId:r.mouseTimeoutId};break;case"SET-LAST-TIME-MOUSE-MOVED":i={...e,lastTimeMouseMoved:r.lastTimeMouseMoved};break;default:throw Error("No reducer defined for type: "+a)}return eh.debug("reduced",a,"to new state",i,"payload",r),i},ew=(e,t,i,a,r,s,o,n,l)=>{let d=(0,z.m8)(),E=(0,Z.useRouter)(),c={type:e,listId:t,initialImageId:i,vanitySubType:r,vanityType:a,refTag:s,gqlClient:d,media:{},errors:{},loading:{},distance:0,showEditDrawer:!1,showReportDrawer:!1,showBottomSheet:!0,pagerVisibility:!0,mouseTimeoutId:0,lastTimeMouseMoved:new Date,enablePagers:!0,pageDirection:"init",adHandlers:o,isUserLoggedIn:n,adBannerCleared:!1,unseenInterstitialAvailable:!1,showInterstitial:!1,prevIsInterstitial:!1,nextIsInterstitial:!1,initiallyLoading:!1};l&&(c=ef(c,{type:"FETCH-IMAGES-DONE",payload:{direction:c.pageDirection,fetchResult:l,fetchPositions:l.images?.map(e=>e.position)}}));let I=X()(ef,c),T=I[0],m=I[1],p={pageLeft:()=>m(eS.page("left")),pageRight:()=>m(eS.page("right")),showEdit:()=>m(eS.showEdit()),hideEdit:()=>m(eS.hideEdit()),showReport:()=>m(eS.showReport()),hideReport:()=>m(eS.hideReport()),showBottomSheet:()=>m(eS.showBottomSheet()),hideBottomSheet:()=>m(eS.hideBottomSheet()),gotoImageId:e=>m(eS.gotoImageId(e)),showPager:()=>m(eS.showPager()),hidePager:()=>m(eS.hidePager()),setMouseTimeoutId:e=>m(eS.setMouseTimeoutId(e)),setLastTimeMouseMoved:e=>m(eS.setLastTimeMouseMoved(e))},g=e=>{Q.M6.isRightArrowKey(e)?p.pageRight():Q.M6.isLeftArrowKey(e)&&p.pageLeft()};(0,u.useEffect)(()=>(window.addEventListener("keydown",g),()=>{window.removeEventListener("keydown",g)}),[]);let A=(0,u.useRef)(void 0),h=(0,u.useRef)(!1);return(0,u.useEffect)(()=>{let{url:e,path:t}=em(T,en((0,S.getIsBrowser)())),i=T.position||0,a=T.media&&T.media[i],r=a?.node.id,s=A.current;if(s&&i!==s&&a&&e){if(A.current=T.position,!r)return;if(!h.current){h.current=!0;return}E.replace(e,t,{shallow:!0,imageId:r})}else 0>window.location.href.indexOf(r)&&e&&E.replace(e,t,{shallow:!0,imageId:r})},[T.position,T.media]),(0,u.useEffect)(()=>{m(eS.initialize(l))},[]),(0,u.useDebugValue)(T),{state:T,actions:p}},e_=(e,t,i,a,r)=>{let s=e,o="left"===a;if(void 0!==s&&!t[s]&&!i[s]){if(r.images.length){let e=o?r.images.length-1:0;s=r.images[e].position}else{let e=Object.keys(i).sort();e.length&&(o&&e.reverse(),s=e.reduce((e,t)=>{let i=e,a=Number(t);return void 0===i?i=a:o&&a<s&&i>s?i=a:a>s&&i<s&&(i=a),i},void 0))}}return s},eN=e=>{let{type:t,listId:i,imgId:s,vanityType:o,vanitySubType:l,refTag:d,adHandlers:E,initialQueryData:c,initialQueryError:T}=e,m=(0,M.n)(),p=(0,D.Z)(),{state:g,actions:A}=ew(t,i,s,o,l,d,E,m,c?eI(t,i,c):void 0),{showInterstitial:O,errors:P,position:C,loading:k,media:x,totalImages:B,initiallyLoading:$}=g,[U,j]=(0,u.useState)(0),Z=(0,u.useRef)(null),J=P[C],X=x[C]?.node,z=x[C-1]?.node,Q=x[C+1]?.node,ee=x[C]?.position,et=k[C]||$,ei=x[C]?.node.correctionLink?.url,ea=x[C]?.node.reportingLink?.url,er={countLabel:(0,L.N)(H.KL.countLabel,{position:ee,total:B}),previousImageLabel:(0,L.N)(H.KL.previousImageLabel),nextImageLabel:(0,L.N)(H.KL.nextImageLabel),closePromptLabel:(0,L.N)(H.KL.closePromptLabel)},es=(0,f.useSwipeable)({onSwipedLeft:e=>{K(-e.deltaX,e=>j(e),A.pageRight)},onSwipedRight:e=>{K(-e.deltaX,e=>j(e),A.pageLeft)},onSwiping:e=>{var t,i;t=-e.deltaX,i=e=>j(e),a?r=()=>{i(q(t))}:(i(q(t)),a=setTimeout(()=>{r&&r(),Y()},V))},onSwiped:()=>{var e;e=e=>j(e),Y(),setTimeout(()=>e(0),V)}});function eo(e){let t=document.getElementsByClassName(e);return!!(t.length>0&&t[0].matches(":hover"))}function en(){return!(0,S.getIsNode)()&&(0,h.getIsMdot)(window.location.hostname)}function el(){if(et||en())return;let e=eo(H.$C.PAGE_LEFT),t=eo(H.$C.PAGE_RIGHT);e||t||A.hidePager()}if((0,u.useEffect)(()=>{en()&&A.showPager()},[]),(0,u.useEffect)(()=>{A.setMouseTimeoutId(setTimeout(el,5e3))},[]),(0,u.useEffect)(()=>{O&&clearTimeout(g.mouseTimeoutId)},[O]),J||T)return(0,n.jsx)(W.Bc,{});let ed={image:X||void 0,title:g.listTitle,description:X?.caption?.plainText||g.listTitle,openGraphData:{type:R.s.Website}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.Se,{...ed}),(0,n.jsx)(v.Z,{}),(0,n.jsx)(f.PageContentContainer,{children:(0,n.jsx)(F,{state:g,imagePosition:ee})}),(0,n.jsxs)(W.zb,{"data-testid":H.$C.PARENT,className:H.$C.PARENT,children:[(0,n.jsx)(W.GX,{...es,onMouseMove:()=>{g.pagerVisibility||A.showPager(),+new Date().getTime()-g.lastTimeMouseMoved.getTime()>400&&(clearTimeout(g.mouseTimeoutId),A.setLastTimeMouseMoved(new Date),A.setMouseTimeoutId(setTimeout(el,2e3)))},"data-testid":H.$C.TOUCH_HANDLER,onClick:e=>{O?G(e,Z.current,"ad-interstitial"):g.showBottomSheet?A.hideBottomSheet():A.showBottomSheet()},children:(0,n.jsx)(W.D5,{})}),g.enablePagers&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(W.f$,{isVisible:!et&&g.pagerVisibility,direction:"left",onSelect:A.pageLeft,className:H.$C.PAGE_LEFT,ariaLabel:er.previousImageLabel}),(0,n.jsx)(W.ed,{isVisible:!et&&g.pagerVisibility,direction:"right",onSelect:A.pageRight,className:H.$C.PAGE_RIGHT,ariaLabel:er.nextImageLabel})]}),et&&!O&&(0,n.jsx)(W.zL,{"data-testid":H.$C.LOADER,children:(0,n.jsx)(f.Loader,{})}),O&&(0,n.jsx)(W.C1,{offset:U,ref:Z,isMdot:en(),children:(0,n.jsx)(b.ZP,{name:I.INTERSTITIAL_SLOT_NAME})}),!g.showInterstitial&&!J&&!T&&!et&&X&&(0,n.jsx)(_.Z,{image:X,"data-testid":H.$C.IMAGE,offset:U,prevImage:g.prevIsInterstitial?void 0:z,nextImage:g.nextIsInterstitial?void 0:Q},"image-"+X.id),!g.showInterstitial&&!J&&!et&&X&&(0,n.jsx)(y.V,{className:H.$C.MEDIA_SHEET,imageData:X,content:{contextTitle:`${g.listTitle}`,contextCount:er.countLabel},editFlow:ei&&p?{desktopLink:ei,desktopOnOpen:()=>A.showEdit(),resolveMobileURL:e=>e.correctionLink.url}:void 0,reportFlow:ea&&p?{desktopLink:ea,desktopOnOpen:()=>A.showReport(),resolveMobileURL:e=>e.reportingLink.url}:void 0,listId:i,isClosed:!g.showBottomSheet,onCloseClicked:A.hideBottomSheet,onOpenClicked:A.showBottomSheet,refTagPrefix:`${H.Nw[g.type]}_mv`}),(0,n.jsx)(f.Drawer,{"data-testid":"mv-contribute-edit-drawer",className:H.$C.CONTRIBUTE_EDIT_DRAWER,isOpen:g.showEditDrawer,onCloseClicked:A.hideEdit,closePromptLabel:er.closePromptLabel,children:X&&(0,n.jsx)(w.o,{src:ei,onCloseMeCallback:A.hideEdit,className:H.$C.CONTRIBUTE_EDIT_IFRAME})}),(0,n.jsx)(f.Drawer,{className:H.$C.CONTRIBUTE_REPORT_DRAWER,isOpen:g.showReportDrawer,onCloseClicked:A.hideReport,children:X&&(0,n.jsx)(w.o,{src:ea,onCloseMeCallback:A.hideReport,className:H.$C.CONTRIBUTE_REPORT_IFRAME})})]})]})};var eR=i(42644),ey=i(42951),ev=i(75079),eb=!0,eL=e=>{let{type:t,id:i,vanityType:a,vanitySubType:r,refTag:s,validImageId:o,initialQueryData:E,initialQueryError:u}=e,p=(0,eR.D)();return p.clientSideUrl=(0,I.updateClientSideUrl)(c()().publicRuntimeConfig.adsPublicSiteHost,(0,d.isDevNodeEnv)(),p.clientSideUrl),(0,n.jsx)(m.ZP,{children:(0,n.jsxs)(ev.Z,{hideNav:!0,hideFooter:!0,hideNavigationProgressBar:!0,baseColor:"baseAlt",orientContent:"full",cti:T.CTIS.GALLERIES_CTI,children:[(0,n.jsx)(eN,{type:t,listId:i,imgId:o,vanityType:a,vanitySubType:r,refTag:s,adHandlers:{updateBannerAd:async()=>{let e=JSON.parse(JSON.stringify(p));delete e.slotSizeMap[I.INTERSTITIAL_SLOT_NAME],await A(e)},updateInterstitialAd:async()=>{if(p.isAbpEnabled)return;let e=JSON.parse(JSON.stringify(p));return delete e.slotSizeMap[I.MEDIAVIEWER_BANNER_SLOT_NAME],A(e)}},initialQueryData:E,initialQueryError:u}),(0,ey.YN)(),(0,n.jsx)(l.CSAPageATFScript,{})]})})}}}]);